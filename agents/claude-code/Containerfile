# Claude Code Agent Toolbox
ARG BASE_IMAGE=ghcr.io/oliveagle/toolbox-opencode/toolbox-base:latest
FROM ${BASE_IMAGE}

LABEL agent="claude-code"
LABEL description="Claude Code AI coding agent toolbox"

# 安装 Claude Code
RUN curl -fsSL https://claude.ai/install | bash || \
    npm install -g @anthropic-ai/claude-code 2>/dev/null || \
    echo "Claude Code 需要手动安装: npm install -g @anthropic-ai/claude-code"

# 创建 claude 配置目录
RUN mkdir -p /home/toolboxuser/.config/claude && \
    chown -R toolboxuser:toolboxuser /home/toolboxuser/.config

# 安装常用工具
RUN apt-get update && apt-get install -y \
    gh \
    && rm -rf /var/lib/apt/lists/*

ENV AGENT_NAME=claude-code
ENV AGENT_CMD=claude

CMD ["/bin/bash"]
