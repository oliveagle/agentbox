# OpenCode Agent Toolbox
ARG BASE_IMAGE=ghcr.io/oliveagle/toolbox-opencode/toolbox-base:latest
FROM ${BASE_IMAGE}

LABEL agent="opencode"
LABEL description="OpenCode AI coding agent toolbox"

# 安装 opencode
RUN npm install -g opencode-ai

# 创建 opencode 配置目录
RUN mkdir -p /home/toolboxuser/.config/opencode && \
    chown -R toolboxuser:toolboxuser /home/toolboxuser/.config

# 安装常用工具（opencode 常用）
RUN apt-get update && apt-get install -y \
    gh \
    hub \
    && rm -rf /var/lib/apt/lists/*

ENV AGENT_NAME=opencode
ENV AGENT_CMD=opencode

CMD ["/bin/bash"]
